rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Rooms: anyone can read, anyone can create
    match /rooms/{roomCode} {
      allow read: if true;
      allow create: if true;
      allow update: if true;  // For MVP; lock down to presenter auth later

      // Questions within a room
      match /questions/{questionId} {
        allow read: if true;
        allow write: if true;  // For MVP

        // Responses within a question
        match /responses/{participantId} {
          allow read: if true;
          allow create: if true;
          allow update: if true;  // Allow changing response
        }
      }
    }
  }
}
